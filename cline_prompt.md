以下は、AIを活用したユーザー（例：マーケティングコンサルタント）とユーザー間の共同プロジェクトのためのWebアプリケーションの設計と実装に関する要件です。Vue.js 3とFirebaseを使用して開発します。PoCのため一人のユーザーがユーザーとしても通常ユーザーとしても機能します。

**全体的な機能:**

*   ユーザーは、複数ステップのAIチャットフローで構成されるプロジェクトテンプレートを作成します。
*   ユーザーは、プロジェクトテンプレートからプロジェクトを開始します。
*   ユーザーは、AIと対話しながら、プロジェクトを進めます。

**プロジェクトテンプレートの機能:**

*   **プロジェクトテンプレート作成:** ユーザーは、プロジェクトテンプレートをステップのシーケンスとして定義できます。各ステップには以下が含まれます。
    *   AIシステムプロンプト
    *   ユーザーが入力に困った場合に、あらかじめ用意された選択肢を提供するオプションのプロンプト
    *   そのステップ内のチャット履歴に基づいて成果物を生成するプロンプト。これらの成果物は、後続のステップで参照できます。
    *   プロジェクトのすべてのステップでアクセス可能なドキュメントをアップロードする機能

**プロジェクト機能:**

*   ユーザーは、プロジェクトテンプレートを使用してプロジェクトを開始します。
*   ユーザーは、既存のプロジェクトからステップをコピーして新しいプロジェクトを作成することもできます。

**ユーザーインターフェース（画面）:**

 *   トップページ兼ログインページ
 *   ダッシュボード（プロジェクトテンプレート一覧、プロジェクト一覧、ログアウト）
 *   プロジェクトテンプレート作成
 *   プロジェクトテンプレート編集
 *   プロジェクトテンプレート削除
 *   プロジェクト詳細

**プロジェクト詳細画面UI:**

*   **左カラム:** ステップをメイン項目として表示します。ステップをクリックすると、中央と右のカラムにその内容が表示されます。各ステップ名称の下段には、成果物の存在を示すアイコンと、短い要約（最大15文字）が表示されます。
*   **中央カラム:** AIプロンプトと、ユーザーがAIと対話するためのチャット入力フォームが含まれます。各ステップごとに用意した、定型文をフィルするためのボタンも表示されます。
*   **右カラム:**
    *   上部：現在のステップに関連するドキュメント（プロジェクト全体または前のステップから）を表示し、AIコンテキストに提供するかどうかを制御するオン/オフのトグル付き。また、アップロードを受け付けるボタンも表示します。
    *   下部：現在のステップで生成された成果物を表示します。タイトルと文字数の要約が表示され、クリックするとモーダルで全文が表示されます。

**データ構造:**

*   ユーザーユーザー
*   一般ユーザー
*   ワークスペース
    *   ユーザーID
    *   ユーザーID（配列）
    *   プロジェクトID（配列）
*   プロジェクトテンプレート
    *   ユーザーID
    *   ステップ（配列）
        *   AIシステムプロンプト
        *   ユーザー選択プロンプト
        *   固定参照ドキュメント
*   プロジェクト
    *   プロジェクトテンプレートID
    *   ワークスペースID
    *   ステップ（配列）
        *   ユーザー入力
        *   AI応答
        *   生成された成果物
        *   参照ドキュメントの使用状況

**AI統合:**

*   基盤となるAIモデルとしてGeminiを使用します。

**具体的な実装ガイダンス（オプション）:**

*   動的なUI更新にはVueコンポーネントの使用を検討してください。
*   堅牢なユーザー認証と認可を実装してください。
*   明確で直感的なユーザーインターフェースを優先してください。

**成果物:**

*   データベーススキーマ（マイグレーション）
*   Firebaseモデルとリレーションシップ
*   主要な画面（例：プロジェクト詳細）の基本的なReactコンポーネント
*   APIエンドポイント（該当する場合）
*   アプリケーションアーキテクチャと主要な機能を概説するドキュメント

このプロンプトは、アプリケーションの要件の包括的な概要を提供します。適切に構造化され、保守しやすいコードベースを提供してください。


-----------
このプロジェクトはVue.js v3とFirebaseで作られた、ユーザーがあらかじめ目標達成までのステップをテンプレートとして公開できるAIチャットサービスです。ユーザーはユーザーによって招待され、AIとの対話を通じてプロジェクトを進めます。ユーザーはプロジェクトテンプレートを作成し、ユーザーをワークスペースに招待し、プロジェクトを管理できます。プロジェクトには各ステップがあり、ステップはAIプロンプト、ユーザーの選択肢、チャット履歴に基づく成果物、およびドキュメントのアップロードを含むことができます。
プロジェクトの進行状況は、左側のステップリスト、中央のAIプロンプトとチャット入力フォーム、右側のドキュメントと成果物で表示されます。データ構造には、ユーザーユーザー、通常のユーザー（ただし現段階ではPoCのためロールを持たず全員ユーザーと通常ユーザーを兼ねる）、ワークスペース、プロジェクトテンプレート、プロジェクトが含まれます。AIモデルとしてGeminiが使用され、Reactコンポーネントを使用して動的なUI更新が行われます。APIはまだ作成中で、まずはフロントを作っています。

このエラーを解消するとともに、プロジェクトルートに.envを置いたので、util/firebase.tsのfirebaseConfigを.envから読み込むように変更し動くようにしてください。

```typescript
ERROR in src/pages/Home.tsx:8:18
TS2339: Property 'signInAnonymously' does not exist on type 'Auth'.
     6 |   const handleAnonymousSignIn = async () => {
     7 |     try {
  >  8 |       await auth.signInAnonymously();
       |                  ^^^^^^^^^^^^^^^^^
     9 |     } catch (error) {
    10 |       console.error('Anonymous sign in failed:', error);
    11 |     }